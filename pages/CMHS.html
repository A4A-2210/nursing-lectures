<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Mental Health Services (C.M.H.S)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons (Vanilla) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8fafc; }
        /* Arabic Font support for any needed Arabic text */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@400;700&display=swap');
        .font-arabic { font-family: 'Noto Kufi Arabic', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useLayoutEffect } = React;

        // --- ICON SYSTEM SETUP ---
        const IconWrapper = ({ name, ...props }) => {
            const ref = useRef(null);
            
            useLayoutEffect(() => {
                if (ref.current && window.lucide && window.lucide.icons[name]) {
                    const iconElement = window.lucide.createElement(window.lucide.icons[name]);
                    if (props.className) {
                        const existingClass = iconElement.getAttribute('class') || '';
                        iconElement.setAttribute('class', `${existingClass} ${props.className}`);
                    }
                    if (props.size) {
                        iconElement.setAttribute('width', props.size);
                        iconElement.setAttribute('height', props.size);
                    }
                    ref.current.innerHTML = '';
                    ref.current.appendChild(iconElement);
                }
            }, [name, props.className, props.size]);

            return <span ref={ref} style={{ display: 'inline-flex', verticalAlign: 'middle' }} />;
        };

        const createIconComponent = (name) => (props) => <IconWrapper name={name} {...props} />;

        // Icons Used
        const Brain = createIconComponent('Brain');
        const Heart = createIconComponent('Heart');
        const Activity = createIconComponent('Activity');
        const Compass = createIconComponent('Compass');
        const Lightbulb = createIconComponent('Lightbulb');
        const ChevronDown = createIconComponent('ChevronDown');
        const ChevronUp = createIconComponent('ChevronUp');
        const AlertCircle = createIconComponent('AlertCircle');
        const Users = createIconComponent('Users');
        const Home = createIconComponent('Home');
        const Shield = createIconComponent('Shield');
        const History = createIconComponent('History');
        const BookOpen = createIconComponent('BookOpen');
        const Layers = createIconComponent('Layers');
        const ArrowRightLeft = createIconComponent('ArrowRightLeft');
        const Clock = createIconComponent('Clock');
        const Building = createIconComponent('Building');
        const Stethoscope = createIconComponent('Stethoscope');

        // --- DEPARTMENT LOGO (SVG REPLICA) ---
        const DepartmentLogo = ({ className = "w-10 h-10" }) => (
            <svg viewBox="0 0 100 120" className={className} xmlns="http://www.w3.org/2000/svg">
                {/* Hand Base (Solid Blue) */}
                <path d="M 5 80 C 15 100 40 110 60 105 C 80 100 95 85 95 75 C 95 70 85 65 75 75 C 65 85 50 90 35 85 C 25 80 15 75 5 80 Z" fill="#004a8f" />
                {/* Finger Lines (White) */}
                <path d="M 30 85 C 45 92 60 90 75 80" stroke="#ffffff" strokeWidth="2.5" strokeLinecap="round" fill="none" />
                <path d="M 40 78 C 55 85 70 80 85 70" stroke="#ffffff" strokeWidth="2.5" strokeLinecap="round" fill="none" />
                {/* Head Outline (Blue) */}
                <path d="M 50 65 L 53 72 L 58 67 L 58 57 C 58 52 64 50 64 45 C 64 43 60 41 60 39 L 68 37 C 70 36 70 34 68 32 C 65 31 62 32 60 29 C 60 15 48 5 35 10" stroke="#004a8f" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" fill="none" />
                {/* Three Overlapping Circles */}
                <g stroke="#1e1b4b" strokeWidth="1.5" fill="none">
                    <circle cx="35" cy="22" r="9" />
                    <circle cx="28" cy="35" r="9" />
                    <circle cx="42" cy="35" r="9" />
                </g>
                {/* CCA Letters */}
                <text x="35" y="24.5" fontSize="7" fill="#1e1b4b" textAnchor="middle" fontWeight="bold" fontFamily="sans-serif">C</text>
                <text x="28" y="37.5" fontSize="7" fill="#1e1b4b" textAnchor="middle" fontWeight="bold" fontFamily="sans-serif">C</text>
                <text x="42" y="37.5" fontSize="7" fill="#1e1b4b" textAnchor="middle" fontWeight="bold" fontFamily="sans-serif">A</text>
            </svg>
        );

        // --- FACULTY LOGO (SVG REPLICA) ---
        const FacultyLogo = ({ className = "w-24 h-28" }) => (
            <svg viewBox="0 0 100 130" className={className} xmlns="http://www.w3.org/2000/svg">
                {/* Outer Borders */}
                <path d="M 2 2 L 98 2 L 98 65 C 98 110 50 128 50 128 C 50 128 2 110 2 65 Z" fill="#24335c" />
                <path d="M 4 4 L 96 4 L 96 65 C 96 108 50 125 50 125 C 50 125 4 108 4 65 Z" fill="#ffffff" />
                
                {/* Sky & Sea */}
                <path d="M 6 6 L 94 6 L 94 65 C 94 106 50 122 50 122 C 50 122 6 106 6 65 Z" fill="#66c5f4" />
                <path d="M 6 75 L 94 75 C 94 106 50 122 50 122 C 50 122 6 106 6 75 Z" fill="#1da2d8" />
                
                {/* Beams */}
                <g stroke="#1a2f57" strokeWidth="0.8">
                    <line x1="50" y1="18" x2="15" y2="12" />
                    <line x1="50" y1="18" x2="10" y2="20" />
                    <line x1="50" y1="18" x2="10" y2="28" />
                    <line x1="50" y1="18" x2="15" y2="35" />
                    
                    <line x1="50" y1="18" x2="85" y2="12" />
                    <line x1="50" y1="18" x2="90" y2="20" />
                    <line x1="50" y1="18" x2="90" y2="28" />
                    <line x1="50" y1="18" x2="85" y2="35" />
                </g>
                
                {/* Fortress & Lighthouse */}
                <g fill="#c49341" stroke="#1a2f57" strokeWidth="1.2" strokeLinejoin="round">
                    {/* Left Tower */}
                    <polygon points="12,60 10,75 22,75 20,60" />
                    <rect x="10" y="56" width="12" height="4" />
                    <rect x="11" y="53" width="10" height="3" />
                    {/* Left Wall */}
                    <rect x="20" y="63" width="18" height="12" />
                    
                    {/* Right Tower */}
                    <polygon points="80,60 78,75 90,75 88,60" />
                    <rect x="78" y="56" width="12" height="4" />
                    <rect x="79" y="53" width="10" height="3" />
                    {/* Right Wall */}
                    <rect x="62" y="63" width="18" height="12" />
                    
                    {/* Main Lighthouse Base */}
                    <polygon points="40,40 33,75 67,75 60,40" />
                    <rect x="38" y="38" width="24" height="4" />
                    {/* Mid Tier */}
                    <rect x="42" y="24" width="16" height="14" />
                    <rect x="40" y="22" width="20" height="3" />
                    {/* Top Tier */}
                    <rect x="45" y="14" width="10" height="8" />
                    <rect x="44" y="12" width="12" height="2" />
                    {/* Lantern */}
                    <polygon points="47,12 48,7 52,7 53,12" />
                </g>
                
                {/* Details (Windows/Doors) */}
                <g fill="none" stroke="#1a2f57" strokeWidth="1.2">
                    {/* Left Wall Windows */}
                    <rect x="22" y="66" width="3" height="4" />
                    <rect x="27" y="66" width="3" height="4" />
                    <rect x="32" y="66" width="3" height="4" />
                    
                    {/* Right Wall Windows */}
                    <rect x="65" y="66" width="3" height="4" />
                    <rect x="70" y="66" width="3" height="4" />
                    <rect x="75" y="66" width="3" height="4" />
                    
                    {/* Main Tower Door & Windows */}
                    <rect x="47" y="64" width="6" height="11" />
                    <rect x="48" y="54" width="4" height="5" />
                    <rect x="48" y="46" width="4" height="5" />
                    
                    {/* Mid Tier Windows */}
                    <rect x="44" y="27" width="4" height="4" />
                    <rect x="52" y="27" width="4" height="4" />
                </g>
                
                {/* Wave styling */}
                <g fill="#1a2f57" stroke="none">
                    <path d="M 12 85 Q 16 87 20 85 L 20 87 Q 16 89 12 87 Z" />
                    <path d="M 28 85 Q 32 87 36 85 L 36 87 Q 32 89 28 87 Z" />
                    <path d="M 44 85 Q 48 87 52 85 L 52 87 Q 48 89 44 87 Z" />
                    <path d="M 60 85 Q 64 87 68 85 L 68 87 Q 64 89 60 87 Z" />
                    <path d="M 76 85 Q 80 87 84 85 L 84 87 Q 80 89 76 87 Z" />
                    
                    <path d="M 20 95 Q 24 97 28 95 L 28 97 Q 24 99 20 97 Z" />
                    <path d="M 36 95 Q 40 97 44 95 L 44 97 Q 40 99 36 97 Z" />
                    <path d="M 52 95 Q 56 97 60 95 L 60 97 Q 56 99 52 97 Z" />
                    <path d="M 68 95 Q 72 97 76 95 L 76 97 Q 72 99 68 97 Z" />

                    <path d="M 28 105 Q 32 107 36 105 L 36 107 Q 32 109 28 107 Z" />
                    <path d="M 44 105 Q 48 107 52 105 L 52 107 Q 48 109 44 107 Z" />
                    <path d="M 60 105 Q 64 107 68 105 L 68 107 Q 64 109 60 107 Z" />
                    
                    <path d="M 40 115 Q 44 117 48 115 L 48 117 Q 44 119 40 117 Z" />
                    <path d="M 52 115 Q 56 117 60 115 L 60 117 Q 56 119 52 117 Z" />
                </g>
            </svg>
        );

        // --- NEW ILLUSTRATION SVGS (15+) ---

        const SvgDevil = () => ( // 1. Early Era
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <path d="M 20 50 Q 50 10 80 50 Q 80 80 50 90 Q 20 80 20 50 Z" fill="#475569" />
                <path d="M 30 50 Q 20 20 10 30 Q 25 40 30 50" fill="#ef4444" />
                <path d="M 70 50 Q 80 20 90 30 Q 75 40 70 50" fill="#ef4444" />
                <circle cx="35" cy="55" r="5" fill="#fca5a5" />
                <circle cx="65" cy="55" r="5" fill="#fca5a5" />
                <path d="M 40 75 Q 50 85 60 75" fill="none" stroke="#fca5a5" strokeWidth="3" />
            </svg>
        );

        const SvgAsylum = () => ( // 2. Asylum Era
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <rect x="20" y="30" width="60" height="60" fill="#94a3b8" />
                <polygon points="10,30 50,10 90,30" fill="#64748b" />
                <rect x="30" y="50" width="10" height="20" fill="#1e293b" />
                <rect x="60" y="50" width="10" height="20" fill="#1e293b" />
                <line x1="32" y1="50" x2="32" y2="70" stroke="#cbd5e1" strokeWidth="1" />
                <line x1="35" y1="50" x2="35" y2="70" stroke="#cbd5e1" strokeWidth="1" />
                <line x1="38" y1="50" x2="38" y2="70" stroke="#cbd5e1" strokeWidth="1" />
                <line x1="62" y1="50" x2="62" y2="70" stroke="#cbd5e1" strokeWidth="1" />
                <line x1="65" y1="50" x2="65" y2="70" stroke="#cbd5e1" strokeWidth="1" />
                <line x1="68" y1="50" x2="68" y2="70" stroke="#cbd5e1" strokeWidth="1" />
            </svg>
        );

        const SvgPills = () => ( // 3. 1950s
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <g transform="rotate(45, 50, 50)">
                    <rect x="35" y="20" width="30" height="60" rx="15" fill="#f8fafc" stroke="#cbd5e1" strokeWidth="2" />
                    <path d="M 35 50 L 65 50 L 65 65 C 65 73.28 58.28 80 50 80 C 41.72 80 35 73.28 35 65 Z" fill="#3b82f6" />
                </g>
                <circle cx="20" cy="80" r="8" fill="#ef4444" />
                <circle cx="80" cy="20" r="10" fill="#10b981" />
            </svg>
        );

        const SvgNetwork = () => ( // 4. 1960s Community
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <line x1="50" y1="20" x2="20" y2="50" stroke="#94a3b8" strokeWidth="2" />
                <line x1="50" y1="20" x2="80" y2="50" stroke="#94a3b8" strokeWidth="2" />
                <line x1="20" y1="50" x2="50" y2="80" stroke="#94a3b8" strokeWidth="2" />
                <line x1="80" y1="50" x2="50" y2="80" stroke="#94a3b8" strokeWidth="2" />
                <line x1="20" y1="50" x2="80" y2="50" stroke="#94a3b8" strokeWidth="2" />
                <circle cx="50" cy="20" r="10" fill="#8b5cf6" />
                <circle cx="20" cy="50" r="12" fill="#3b82f6" />
                <circle cx="80" cy="50" r="10" fill="#10b981" />
                <circle cx="50" cy="80" r="14" fill="#f59e0b" />
            </svg>
        );

        const SvgHospitalBed = () => ( // 5. Curative / In-patient
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <rect x="10" y="60" width="80" height="10" rx="2" fill="#cbd5e1" />
                <rect x="15" y="40" width="10" height="40" rx="2" fill="#64748b" />
                <rect x="75" y="50" width="10" height="30" rx="2" fill="#64748b" />
                <path d="M 25 60 Q 30 45 45 45 L 75 45 L 75 60 Z" fill="#93c5fd" />
                <circle cx="35" cy="50" r="6" fill="#f8fafc" />
                <path d="M 45 30 L 55 30 M 50 25 L 50 35" stroke="#ef4444" strokeWidth="3" strokeLinecap="round" />
            </svg>
        );

        const SvgHourglass = () => ( // 6. Late Finding
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <polygon points="20,10 80,10 50,45" fill="#e2e8f0" stroke="#64748b" strokeWidth="2"/>
                <polygon points="50,55 20,90 80,90" fill="#e2e8f0" stroke="#64748b" strokeWidth="2"/>
                <polygon points="30,80 70,80 50,55" fill="#f59e0b" />
                <line x1="15" y1="10" x2="85" y2="10" stroke="#334155" strokeWidth="4" />
                <line x1="15" y1="90" x2="85" y2="90" stroke="#334155" strokeWidth="4" />
                <line x1="50" y1="45" x2="50" y2="55" stroke="#f59e0b" strokeWidth="2" />
            </svg>
        );

        const SvgOvercrowded = () => ( // 7. Overcrowding
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <rect x="10" y="20" width="80" height="70" rx="5" fill="#f1f5f9" stroke="#94a3b8" strokeWidth="2" />
                <circle cx="30" cy="40" r="8" fill="#ef4444" />
                <circle cx="50" cy="45" r="8" fill="#3b82f6" />
                <circle cx="70" cy="40" r="8" fill="#10b981" />
                <circle cx="40" cy="65" r="8" fill="#f59e0b" />
                <circle cx="60" cy="65" r="8" fill="#8b5cf6" />
                <circle cx="50" cy="85" r="8" fill="#ec4899" />
            </svg>
        );

        const SvgDesocialization = () => ( // 8. De-socialization
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="50" r="10" fill="#94a3b8" />
                <path d="M 10 80 Q 20 60 30 80" fill="none" stroke="#94a3b8" strokeWidth="5" strokeLinecap="round" />
                
                <circle cx="70" cy="30" r="8" fill="#3b82f6" />
                <circle cx="85" cy="45" r="8" fill="#3b82f6" />
                <circle cx="70" cy="60" r="8" fill="#3b82f6" />
                <line x1="45" y1="10" x2="45" y2="90" stroke="#cbd5e1" strokeWidth="2" strokeDasharray="5 5" />
            </svg>
        );

        const SvgLifeRing = () => ( // 9. Crisis Intervention
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="40" fill="none" stroke="#ef4444" strokeWidth="15" />
                <circle cx="50" cy="50" r="25" fill="none" stroke="#f8fafc" strokeWidth="15" />
                <path d="M 15 15 L 30 30 M 85 15 L 70 30 M 15 85 L 30 70 M 85 85 L 70 70" stroke="#f8fafc" strokeWidth="8" strokeLinecap="round" />
            </svg>
        );

        const SvgClinic = () => ( // 10. Out-patient
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <polygon points="10,50 50,10 90,50" fill="#3b82f6" />
                <rect x="20" y="50" width="60" height="40" fill="#f1f5f9" />
                <rect x="40" y="60" width="20" height="30" fill="#94a3b8" />
                <path d="M 50 25 L 50 45 M 40 35 L 60 35" stroke="#f8fafc" strokeWidth="5" strokeLinecap="round" />
            </svg>
        );

        const SvgDayNight = () => ( // 11. Partial Hospitalization
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="40" fill="#f8fafc" stroke="#cbd5e1" strokeWidth="4" />
                <path d="M 50 10 A 40 40 0 0 1 50 90 Z" fill="#1e293b" />
                <path d="M 50 10 A 40 40 0 0 0 50 90 Z" fill="#fde047" />
                <circle cx="70" cy="30" r="4" fill="#f8fafc" />
                <circle cx="80" cy="60" r="2" fill="#f8fafc" />
            </svg>
        );

        const SvgBridge = () => ( // 12. Transitional / Half-way
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <path d="M 10 60 Q 50 20 90 60" fill="none" stroke="#8b5cf6" strokeWidth="8" strokeLinecap="round" />
                <rect x="20" y="45" width="6" height="45" fill="#cbd5e1" />
                <rect x="50" y="35" width="6" height="55" fill="#cbd5e1" />
                <rect x="80" y="45" width="6" height="45" fill="#cbd5e1" />
                <path d="M 0 90 L 100 90" stroke="#94a3b8" strokeWidth="4" />
            </svg>
        );

        const SvgFoster = () => ( // 13. Foster Homes
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <path d="M 10 70 Q 30 90 50 70 Q 70 90 90 70" fill="none" stroke="#10b981" strokeWidth="8" strokeLinecap="round" />
                <polygon points="50,20 30,40 70,40" fill="#f43f5e" />
                <rect x="35" y="40" width="30" height="25" fill="#fcd34d" />
            </svg>
        );

        const SvgShieldHealth = () => ( // 14. Primary Prevention
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <path d="M 50 10 L 90 25 L 90 50 C 90 75 50 90 50 90 C 50 90 10 75 10 50 L 10 25 Z" fill="#10b981" />
                <path d="M 50 35 L 50 65 M 35 50 L 65 50" stroke="#f8fafc" strokeWidth="6" strokeLinecap="round" />
            </svg>
        );

        const SvgMagnifier = () => ( // 15. Secondary Prevention
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <circle cx="45" cy="45" r="30" fill="#bfdbfe" stroke="#3b82f6" strokeWidth="6" />
                <line x1="66" y1="66" x2="90" y2="90" stroke="#3b82f6" strokeWidth="10" strokeLinecap="round" />
                <path d="M 45 25 L 45 50 M 45 58 L 45 60" stroke="#ef4444" strokeWidth="4" strokeLinecap="round" />
            </svg>
        );

        const SvgRehab = () => ( // 16. Tertiary Prevention
            <svg viewBox="0 0 100 100" className="w-16 h-16 opacity-80" xmlns="http://www.w3.org/2000/svg">
                <path d="M 10 90 L 40 90 L 40 60 L 70 60 L 70 30 L 90 30" fill="none" stroke="#f59e0b" strokeWidth="8" strokeLinecap="round" />
                <circle cx="25" cy="75" r="8" fill="#3b82f6" />
                <circle cx="55" cy="45" r="8" fill="#3b82f6" />
                <circle cx="80" cy="15" r="8" fill="#10b981" />
            </svg>
        );


        // --- ILLUSTRATION COMPONENTS ---

        const ContinuumIllustration = () => (
            <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm my-6">
                <h5 className="font-bold text-slate-700 mb-6 text-center">The Mental Health Continuum</h5>
                <div className="relative w-full h-12 flex items-center">
                    <div className="absolute inset-0 bg-gradient-to-r from-emerald-400 via-amber-300 to-rose-500 rounded-full opacity-80"></div>
                    
                    {/* Tick marks */}
                    <div className="absolute left-0 h-full flex flex-col justify-center px-4">
                        <div className="w-1 h-3 bg-white rounded"></div>
                    </div>
                    <div className="absolute left-1/2 h-full flex flex-col justify-center">
                        <div className="w-1 h-3 bg-white/50 rounded"></div>
                    </div>
                    <div className="absolute right-0 h-full flex flex-col justify-center px-4">
                        <div className="w-1 h-3 bg-white rounded"></div>
                    </div>
                    
                    {/* Slider dot representing fluctuation */}
                    <div className="absolute left-1/3 w-6 h-6 bg-white border-4 border-emerald-500 rounded-full shadow-md animate-[pulse_3s_ease-in-out_infinite]"></div>
                </div>
                <div className="flex justify-between mt-3 font-bold text-sm">
                    <span className="text-emerald-600">Mental Health</span>
                    <span className="text-slate-400">Fluctuates over time</span>
                    <span className="text-rose-600">Mental Illness</span>
                </div>
                <p className="text-center text-xs text-slate-500 mt-4">
                    The main purpose of C.M.H.S is to keep people as near to the mental health end as possible.
                </p>
            </div>
        );

        const TheoriesIllustration = () => (
            <div className="grid md:grid-cols-2 gap-4 my-6">
                <div className="bg-emerald-50 p-4 rounded-lg border border-emerald-200 shadow-sm flex flex-col items-center text-center">
                    <h5 className="font-bold text-emerald-800 mb-2">1. Ecological Theory</h5>
                    <svg width="150" height="150" viewBox="0 0 150 150" className="my-2">
                        <circle cx="75" cy="75" r="60" fill="none" stroke="#10b981" strokeWidth="4" strokeDasharray="10 5" />
                        <circle cx="75" cy="75" r="30" fill="#34d399" />
                        <path d="M 75 25 L 75 40 M 75 110 L 75 125 M 25 75 L 40 75 M 110 75 L 125 75" stroke="#047857" strokeWidth="3" />
                        <text x="75" y="80" fontSize="12" fill="white" textAnchor="middle" fontWeight="bold">Person</text>
                        <text x="75" y="15" fontSize="10" fill="#047857" textAnchor="middle">Environment</text>
                    </svg>
                    <p className="text-xs text-emerald-700">Interdependence between person and environment (Adaptation, Cycling, Succession).</p>
                </div>

                <div className="bg-blue-50 p-4 rounded-lg border border-blue-200 shadow-sm flex flex-col items-center text-center">
                    <h5 className="font-bold text-blue-800 mb-2">2. System Theory</h5>
                    <svg width="150" height="150" viewBox="0 0 150 150" className="my-2">
                        <rect x="10" y="10" width="130" height="130" rx="10" fill="none" stroke="#3b82f6" strokeWidth="3" />
                        <circle cx="75" cy="45" r="20" fill="#60a5fa" />
                        <circle cx="45" cy="100" r="20" fill="#60a5fa" />
                        <circle cx="105" cy="100" r="20" fill="#60a5fa" />
                        <line x1="75" y1="65" x2="55" y2="85" stroke="#1e3a8a" strokeWidth="2" />
                        <line x1="75" y1="65" x2="95" y2="85" stroke="#1e3a8a" strokeWidth="2" />
                        <line x1="65" y1="100" x2="85" y2="100" stroke="#1e3a8a" strokeWidth="2" />
                        <text x="75" y="14" fontSize="10" fill="#1e3a8a" textAnchor="middle">Community (Macro)</text>
                    </svg>
                    <p className="text-xs text-blue-700">Community is composed of interacting subsystems (Family, Groups). A change in one affects all.</p>
                </div>
            </div>
        );

        const PreventionPyramid = () => (
            <div className="my-8 flex flex-col items-center">
                <div className="relative w-full max-w-md h-64 flex flex-col justify-end">
                    {/* Tertiary */}
                    <div className="w-1/3 h-16 bg-rose-400 mx-auto rounded-t-lg flex items-center justify-center text-white font-bold shadow-md z-30 transform hover:scale-105 transition-transform border-b-2 border-rose-500">
                        Tertiary (Rehab)
                    </div>
                    {/* Secondary */}
                    <div className="w-2/3 h-16 bg-amber-400 mx-auto rounded-t-lg flex items-center justify-center text-amber-900 font-bold shadow-md z-20 -mt-2 transform hover:scale-105 transition-transform border-b-2 border-amber-500">
                        Secondary (Early Tx)
                    </div>
                    {/* Primary */}
                    <div className="w-full h-16 bg-emerald-400 mx-auto rounded-t-lg flex items-center justify-center text-emerald-900 font-bold shadow-md z-10 -mt-2 transform hover:scale-105 transition-transform border-b-2 border-emerald-500">
                        Primary (Promote/Prevent)
                    </div>
                </div>
                <p className="text-sm text-slate-500 mt-4 text-center">The 3 Levels of Prevention in Community Mental Health</p>
            </div>
        );


        // --- APPLICATION DATA ---

        const SECTIONS = {
            INTRO: 'introduction',
            THEORY: 'theory',
            SERVICES: 'services',
            NURSING: 'nursing',
            QUIZ: 'quiz'
        };

        const DATA = {
            intro: {
                definition: "Community Mental Health Services (C.M.H.S) are \"all services that apply specialized knowledge to populations and communities to promote and maintain mental health, treat mental illness and to rehabilitate target groups that continue to have residual effects of mental illness, for the purpose of fitting them for satisfactory and useful life within their own social environment\".",
                history: [
                    { term: "Early Era", def: "Clients were looked at as possessed by devils. Therapy was punitive (driving the devil out, or the client out of the community).", customSvg: <SvgDevil/> },
                    { term: "Asylum Era", def: "Mental illness viewed as disease. Established Asylums for moral treatment. Soon became overcrowded and understaffed.", customSvg: <SvgAsylum/> },
                    { term: "1950s", def: "Introduction of antipsychotic and antidepressant drugs led to better control and decreased need for hospitalization.", customSvg: <SvgPills/> },
                    { term: "1960s & Beyond", def: "Organized C.M.H.S started on a national level, role expanded with emphasis on consultation, liaison, and prevention.", customSvg: <SvgNetwork/> }
                ],
                whyShift: [
                    { term: "Emphasis on Curative", def: "Hospital focus is treating problems, not preventing them.", customSvg: <SvgHospitalBed/> },
                    { term: "Late Case Finding", def: "Less promotion/maintenance leads to late treatment, chronicity, and long stays.", customSvg: <SvgHourglass/> },
                    { term: "Overcrowding", def: "Absence of prevention increases incidence/prevalence, overcrowding hospitals.", customSvg: <SvgOvercrowded/> },
                    { term: "De-socialization", def: "Long hospital stays lead to loss of social/functional roles.", customSvg: <SvgDesocialization/> },
                    { term: "Lack of Crisis Intervention", def: "Increases incidence and consequences of severe episodes.", customSvg: <SvgLifeRing/> },
                    { term: "Poor Quality of Care", def: "Overcrowded hospitals cannot provide high quality care." },
                    { term: "Readmissions", def: "Absence of proper rehabilitation and follow-up increases relapse, stigmatization, and costs." }
                ]
            },
            theory: {
                ecological: {
                    title: "1. Ecological Theory",
                    def: "The people in the community and their environment are viewed as interdependent. A change in internal/external environment influences equilibrium.",
                    details: [
                        "a. Adaptation: Too much/fast stressors disrupt stability.",
                        "b. Cycling of resources: Need mechanisms to replenish coping capacities (promotion, counseling).",
                        "c. Succession: Living systems are constantly changing, needing reserves of adaptive energy."
                    ]
                },
                system: {
                    title: "2. System Theory",
                    def: "Community is a system composed of subsystems (family, groups). Interaction is continuous. A change in any subsystem affects the whole system.",
                    note: "Example: A sick person affects the whole family; family problems affect the community."
                },
                characteristics: [
                    "Responsibility for a population, identifying needs and resources.",
                    "Treatment close to client, early identification, brief hospitalization.",
                    "Comprehensive services (emergency, out-patient, partial, consultation).",
                    "Multidisciplinary team approach.",
                    "Emphasize continuity of care and liaison work.",
                    "Encourage consumer participation.",
                    "Adopt the concept of prevention (primary, secondary, tertiary).",
                    "Avoid unnecessary hospitalization to minimize stigma and regression."
                ]
            },
            services: {
                common: [
                    { 
                        term: "1. Emergency / Crisis Intervention", 
                        def: "24-hour/7-day service. Revolving door between clients and network. Aims at crisis stabilization through interviews, mobilization of resources. Clients demonstrate severe symptoms. Focuses on stabilization and symptom reduction.",
                        icon: <AlertCircle className="w-5 h-5 text-red-500" />,
                        customSvg: <SvgLifeRing/>
                    },
                    { 
                        term: "2. Out-patient Services", 
                        def: "Located in hospitals or social centers (schools, mosques). Promotes community reintegration, medication management. Less intensive, for clients not needing hospital/home care. Maintains contact with referring agencies.",
                        icon: <Users className="w-5 h-5 text-blue-500" />,
                        customSvg: <SvgClinic/>
                    },
                    { 
                        term: "3. Partial Hospitalization", 
                        def: "Comprehensive care for clients not dysfunctional enough for full hospitalization, but needing structured treatment (1-3 months, 6-8 hrs/day). Preserves social contacts.",
                        icon: <Clock className="w-5 h-5 text-purple-500" />,
                        customSvg: <SvgDayNight/>,
                        details: [
                            "A- Day hospital: Emphasizes psychotherapy, social skills, vocational training for those experiencing decline but not posing imminent danger.",
                            "B- Night hospital: For individuals who work during the day. They receive meds/counseling at night, relax, sleep, and leave for work in the morning."
                        ]
                    },
                    { 
                        term: "4. In-patient Services", 
                        def: "Most intensive/restrictive. Reserved for acutely ill (risk to self, risk to others, unable to care for basic needs). Average stay ~3 weeks.",
                        icon: <Building className="w-5 h-5 text-slate-700" />,
                        customSvg: <SvgHospitalBed/>,
                        details: [
                            "Can be in Psychiatric Hospital, C.M.H.C, or Psychiatric ward in a General Hospital.",
                            "General hospital units reduce stigma, are readily accepted, decrease mental hospital admissions, and allow medical/psychiatric staff consultation."
                        ]
                    },
                    { 
                        term: "5. Transitional Housing (Half-way)", 
                        def: "For patients whose progress in hospital is standstill. Fosters independence. Clients can maintain equilibrium in hospital but not at home. Midway between sickness and health.",
                        icon: <ArrowRightLeft className="w-5 h-5 text-amber-500" />,
                        customSvg: <SvgBridge/>
                    },
                    { 
                        term: "6. Foster Homes", 
                        def: "Arrangements to live away from own homes for clients unable to live independently after discharge, those with no family, or elderly.",
                        icon: <Home className="w-5 h-5 text-emerald-500" />,
                        customSvg: <SvgFoster/>
                    },
                    { 
                        term: "7. Other Services", 
                        def: "Consultation/Education, Diagnostic, Rehabilitative (vocational/educational), Sheltered workshops, Family therapy, Follow-up, Research, Evaluation.",
                        icon: <Layers className="w-5 h-5 text-indigo-500" />
                    }
                ],
                prevention: [
                    {
                        term: "Primary Prevention",
                        def: "Decreasing rate of new cases by counteracting harmful factors before they produce illness. Emphasizes health maintenance.",
                        customSvg: <SvgShieldHealth/>,
                        details: [
                            "Maternity/family clinics to prevent issues in relationships.",
                            "Discussion groups for parents regarding child rearing.",
                            "Crisis intervention to foster growth during stress.",
                            "Biological, social, psychological interventions to alter causative factors."
                        ]
                    },
                    {
                        term: "Secondary Prevention",
                        def: "Reducing prevalence by shortening illness duration through early case finding and prompt effective treatment. Identifies 'high-risk' groups.",
                        customSvg: <SvgMagnifier/>,
                        details: [
                            "Workplace: Frequent absences, minor accidents, job changes.",
                            "College: Incoming students, low grades, significant loss, drug users.",
                            "Individuals are trained and supervised through consultation process."
                        ]
                    },
                    {
                        term: "Tertiary Prevention",
                        def: "Treatment and rehab for diagnosed illness. Aims to reduce severity, disability, or residual impairment. Requires careful follow-up.",
                        customSvg: <SvgRehab/>,
                        details: [
                            "Public hospital admission for acute phase (addicts, schizophrenic, depressed).",
                            "Aftercare supervised/coordinated by C.M.H.C (referrals, checkups).",
                            "Monthly group sessions, home visits, family meetings, vocational placement."
                        ]
                    }
                ]
            },
            nursing: {
                intro: "Psychiatric nursing in the community setting differs markedly from hospital. Requires knowledge of community resources, flexibility, and blending medical with psychosocial care.",
                roles: [
                    { term: "A- Emergency / Crisis intervention", def: "High degree of nursing expertise. Assessment, short-term interventions, medication administration, facilitate referrals." },
                    { term: "B- Out-patient services", def: "Home visits, evaluating situations, helping situate clients, working with family/neighbors, consultation/education. Requires broad social, economic, political knowledge." },
                    { term: "C- Partial hospitalization", def: "Similar to in-patient but compressed time. Mobile population coming and going. Needs flexibility to cope with constantly changing stresses as patients return to the community daily." },
                    { term: "D- In-patient services", def: "Utilize therapeutic milieu, focus on early discharge, active part in daily living, speak spontaneously in meetings, carry on team measures." },
                    { term: "E- Foster homes", def: "Basic psychiatric nursing with focus on psychoeducation, social skills, aggression management, ADLs, and group living." }
                ],
                resources: [
                    "General and private psychiatric hospitals.",
                    "Psychiatric units in general hospitals.",
                    "Out-patient psychiatric clinics.",
                    "Special institutions (Mentally retarded, Substance dependents, Child psychiatry)."
                ]
            }
        };

        const QUIZ_QUESTIONS = [
            {
                q: "What is the primary goal of Community Mental Health Services (C.M.H.S) regarding the mental health continuum?",
                options: [
                    "To completely cure all mental illnesses immediately.",
                    "To keep people as much as possible nearer to the mental health end of the continuum.",
                    "To ensure every individual receives long-term hospitalization.",
                    "To isolate mentally ill individuals from their communities."
                ],
                correct: 1
            },
            {
                q: "Which theory is based on the principles of Adaptation, Cycling of resources, and Succession?",
                options: ["System Theory", "Cognitive Behavioral Theory", "Ecological Theory", "Psychoanalytic Theory"],
                correct: 2
            },
            {
                q: "A nurse is working in a college and identifies a student whose grades dropped severely after a significant personal loss. Targeting this 'high-risk' student is an example of:",
                options: ["Primary Prevention", "Secondary Prevention", "Tertiary Prevention", "Partial Hospitalization"],
                correct: 1
            },
            {
                q: "Which service is designed for individuals who need structured treatment but cannot afford to leave their employment during the day?",
                options: ["Foster Homes", "Day Hospital", "Night Hospital", "Half-way Houses"],
                correct: 2
            },
            {
                q: "Why is having a psychiatric unit in a general hospital considered advantageous?",
                options: [
                    "It enforces involuntary admissions.",
                    "It increases the stigma associated with mental illness.",
                    "It reduces stigma, is readily accepted, and allows medical-psychiatric consultation.",
                    "It ensures patients stay hospitalized for years."
                ],
                correct: 2
            }
        ];

        // --- REUSABLE UI COMPONENTS ---

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6 ${className}`}>
                {children}
            </div>
        );

        const SectionHeader = ({ title, icon, color }) => (
            <div className={`flex items-center gap-3 mb-6 p-4 rounded-lg ${color} bg-opacity-10`}>
                <div className={`p-2 rounded-full bg-white shadow-sm ${color.replace('bg-', 'text-')}`}>
                    {icon}
                </div>
                <h2 className="text-2xl font-bold text-slate-800">{title}</h2>
            </div>
        );

        const TermItem = ({ term, def, note, icon, customSvg, isPathology, details }) => {
            const [isOpen, setIsOpen] = useState(false);
            
            return (
                <div className={`mb-3 border-l-4 ${isPathology ? 'border-red-400' : 'border-blue-400'} bg-slate-50 rounded-r-lg overflow-hidden transition-all duration-300`}>
                    <div 
                        className="p-3 flex justify-between items-start cursor-pointer hover:bg-slate-100"
                        onClick={() => setIsOpen(!isOpen)}
                    >
                        <div className="flex items-start gap-3 w-full">
                            {customSvg ? (
                                <div className="hidden sm:block mt-1 flex-shrink-0 bg-white p-2 rounded shadow-sm border border-slate-200">
                                    {customSvg}
                                </div>
                            ) : icon ? (
                                <span className="mt-1 flex-shrink-0">{icon}</span>
                            ) : null}
                            <div className="flex-1">
                                <h4 className="font-bold text-slate-800 text-lg">{term}</h4>
                                <p className="text-slate-600 text-sm leading-relaxed mt-1">{def}</p>
                                {details && !isOpen && <p className="text-xs text-blue-500 mt-2 font-medium">Click to view details...</p>}
                            </div>
                        </div>
                        { (note || details) && (
                            <button className="text-slate-400 hover:text-blue-600 flex-shrink-0 ml-2 mt-1">
                                {isOpen ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
                            </button>
                        )}
                    </div>
                    
                    {isOpen && (note || details) && (
                        <div className="bg-white p-4 border-t border-slate-200 text-sm animate-in fade-in slide-in-from-top-1">
                            {details && (
                                <div className="mb-2">
                                    <ul className="list-disc list-inside space-y-2 text-slate-700">
                                        {details.map((item, i) => <li key={i} className="leading-relaxed">{item}</li>)}
                                    </ul>
                                </div>
                            )}
                            {note && (
                                <div className="text-slate-600 bg-blue-50 p-3 rounded border border-blue-100 italic mt-3">
                                    <span className="font-semibold text-blue-800 not-italic mr-2">Note:</span> {note}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        };

        // --- MAIN APP COMPONENT ---

        function CMHSApp() {
            const [activeSection, setActiveSection] = useState(SECTIONS.INTRO);
            const [quizScore, setQuizScore] = useState(0);
            const [quizSubmitted, setQuizSubmitted] = useState(false);
            const [quizAnswers, setQuizAnswers] = useState({});

            const handleNavClick = (section) => {
                setActiveSection(section);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const handleQuizOption = (qIndex, optIndex) => {
                if (quizSubmitted) return;
                setQuizAnswers(prev => ({ ...prev, [qIndex]: optIndex }));
            };

            const submitQuiz = () => {
                let score = 0;
                QUIZ_QUESTIONS.forEach((q, i) => {
                    if (quizAnswers[i] === q.correct) score++;
                });
                setQuizScore(score);
                setQuizSubmitted(true);
            };

            const resetQuiz = () => {
                setQuizAnswers({});
                setQuizSubmitted(false);
                setQuizScore(0);
            };

            // --- Views ---

            const IntroView = () => (
                <div className="space-y-8 animate-in fade-in duration-500">
                    <div className="bg-gradient-to-r from-teal-600 to-blue-800 text-white p-8 rounded-2xl shadow-xl relative overflow-hidden">
                        <div className="relative z-10">
                            <h1 className="text-4xl font-extrabold mb-4">Community Mental Health Services</h1>
                            <p className="text-blue-100 text-lg max-w-2xl mb-6">
                                Shifting the paradigm of psychiatric care from isolated institutionalization to community integration, prevention, and holistic rehabilitation.
                            </p>
                            <div className="bg-white/10 p-4 rounded-lg border border-white/20 backdrop-blur-sm mb-6">
                                <h3 className="font-bold text-white mb-2 flex items-center gap-2"><BookOpen size={20}/> Definition</h3>
                                <p className="text-teal-50 text-sm leading-relaxed italic">
                                    {DATA.intro.definition}
                                </p>
                            </div>
                            <div className="flex gap-3">
                                <button onClick={() => handleNavClick(SECTIONS.THEORY)} className="bg-white text-teal-700 px-6 py-2 rounded-full font-bold hover:bg-teal-50 transition shadow">Theoretical Background</button>
                                <button onClick={() => handleNavClick(SECTIONS.SERVICES)} className="bg-blue-900 bg-opacity-40 text-white border border-blue-400 px-6 py-2 rounded-full font-bold hover:bg-blue-800 transition">View Services</button>
                            </div>
                        </div>
                        <Users className="absolute top-10 right-10 text-white opacity-10 w-64 h-64" />
                    </div>

                    <ContinuumIllustration />

                    <div className="grid md:grid-cols-2 gap-6">
                        <Card className="border-t-4 border-t-indigo-500">
                            <h3 className="text-xl font-bold mb-4 flex items-center gap-2 text-indigo-900">
                                <History className="text-indigo-500" /> Historical View
                            </h3>
                            <div className="space-y-4 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-slate-300 before:to-transparent">
                                {DATA.intro.history.map((item, idx) => (
                                    <div key={idx} className="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active">
                                        <div className="flex items-center justify-center w-10 h-10 rounded-full border-4 border-white bg-indigo-200 text-indigo-700 shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 shadow-sm z-10 font-bold text-xs overflow-hidden p-1">
                                            {item.customSvg ? item.customSvg : idx + 1}
                                        </div>
                                        <div className="w-[calc(100%-4rem)] md:w-[calc(50%-2.5rem)] bg-slate-50 p-4 rounded-lg border border-slate-200 shadow-sm">
                                            <h4 className="font-bold text-indigo-800 text-sm mb-1">{item.term}</h4>
                                            <p className="text-xs text-slate-600">{item.def}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </Card>

                        <Card className="border-t-4 border-t-rose-500">
                            <h3 className="text-xl font-bold mb-4 flex items-center gap-2 text-rose-900">
                                <ArrowRightLeft className="text-rose-500" /> Why Shift to C.M.H?
                            </h3>
                            <p className="text-sm text-slate-600 mb-4">Hospitalization remains a necessity, but relying solely on institutions leads to limitations:</p>
                            <div className="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                                {DATA.intro.whyShift.map((item, idx) => (
                                    <div key={idx} className="bg-rose-50/50 p-3 rounded border border-rose-100 flex items-center gap-3">
                                        <div className="shrink-0 w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-sm border border-rose-200">
                                            {item.customSvg ? item.customSvg : <AlertCircle className="text-rose-400 w-6 h-6" />}
                                        </div>
                                        <div>
                                            <span className="font-bold text-rose-800 text-sm block">{item.term}</span>
                                            <span className="text-slate-600 text-xs">{item.def}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </Card>
                    </div>
                </div>
            );

            const TheoryView = () => (
                <div className="animate-in slide-in-from-right-4 duration-500">
                    <SectionHeader title="Theoretical Background & Center Characteristics" icon={<Compass size={32} />} color="bg-cyan-100 text-cyan-600" />
                    
                    <p className="text-slate-700 mb-6 bg-white p-4 rounded border border-slate-200 shadow-sm">
                        It is believed that correction of mental disturbances and rehabilitation of clients are more likely when individuals are treated in their own <strong>cultural settings</strong>, close to family and social systems. Two theories support this:
                    </p>

                    <TheoriesIllustration />

                    <div className="grid md:grid-cols-2 gap-6 mb-8">
                        <Card className="border-l-4 border-emerald-500">
                            <TermItem 
                                term={DATA.theory.ecological.title} 
                                def={DATA.theory.ecological.def} 
                                details={DATA.theory.ecological.details} 
                            />
                        </Card>
                        <Card className="border-l-4 border-blue-500">
                            <TermItem 
                                term={DATA.theory.system.title} 
                                def={DATA.theory.system.def} 
                                note={DATA.theory.system.note} 
                            />
                        </Card>
                    </div>

                    <Card className="bg-slate-800 text-white">
                        <h3 className="text-xl font-bold mb-4 flex items-center gap-2 text-cyan-300 border-b border-slate-700 pb-2">
                            <Building /> Characteristics of Community Mental Health Centers (C.M.H.C)
                        </h3>
                        <ul className="grid md:grid-cols-2 gap-3">
                            {DATA.theory.characteristics.map((item, idx) => (
                                <li key={idx} className="flex gap-3 bg-slate-700/50 p-3 rounded items-start">
                                    <span className="bg-cyan-500 text-white rounded-full w-5 h-5 flex items-center justify-center shrink-0 text-xs font-bold mt-0.5"></span>
                                    <span className="text-sm text-slate-200 leading-relaxed">{item}</span>
                                </li>
                            ))}
                        </ul>
                    </Card>
                </div>
            );

            const ServicesView = () => (
                <div className="animate-in slide-in-from-right-4 duration-500">
                    <SectionHeader title="Services & Prevention" icon={<Layers size={32} />} color="bg-amber-100 text-amber-600" />
                    
                    <div className="mb-10">
                        <h3 className="text-2xl font-bold text-slate-800 mb-6 border-b pb-2">I. Common Services Provided</h3>
                        <div className="grid lg:grid-cols-2 gap-4">
                            {DATA.services.common.map((service, idx) => (
                                <div key={idx} className={`${idx === DATA.services.common.length - 1 && DATA.services.common.length % 2 !== 0 ? 'lg:col-span-2' : ''}`}>
                                    <TermItem 
                                        term={service.term} 
                                        def={service.def} 
                                        icon={service.icon} 
                                        customSvg={service.customSvg}
                                        details={service.details} 
                                    />
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="mb-8">
                        <h3 className="text-2xl font-bold text-slate-800 mb-2 border-b pb-2">II. The Concept of Prevention</h3>
                        <PreventionPyramid />
                        
                        <div className="space-y-4">
                            {DATA.services.prevention.map((item, idx) => (
                                <Card key={idx} className={`border-l-4 ${idx === 0 ? 'border-emerald-500' : idx === 1 ? 'border-amber-500' : 'border-rose-500'}`}>
                                    <div className="flex items-start gap-4">
                                        {item.customSvg && (
                                            <div className="shrink-0 hidden md:block w-20 h-20 bg-slate-50 border border-slate-200 rounded p-2 flex items-center justify-center">
                                                {item.customSvg}
                                            </div>
                                        )}
                                        <div className="flex-1">
                                            <h4 className={`font-bold text-xl mb-2 ${idx === 0 ? 'text-emerald-800' : idx === 1 ? 'text-amber-800' : 'text-rose-800'}`}>
                                                {item.term}
                                            </h4>
                                            <p className="text-slate-700 mb-3">{item.def}</p>
                                        </div>
                                    </div>
                                    <div className="bg-slate-50 p-3 rounded mt-3">
                                        <h5 className="text-xs font-bold text-slate-500 uppercase tracking-wide mb-2">Key Interventions & Examples</h5>
                                        <ul className="list-disc list-inside text-sm text-slate-600 space-y-1">
                                            {item.details.map((detail, dIdx) => (
                                                <li key={dIdx}>{detail}</li>
                                            ))}
                                        </ul>
                                    </div>
                                </Card>
                            ))}
                        </div>
                    </div>
                </div>
            );

            const NursingView = () => (
                <div className="animate-in slide-in-from-right-4 duration-500">
                    <SectionHeader title="Role of the Nurse & Resources" icon={<Stethoscope size={32} />} color="bg-purple-100 text-purple-600" />
                    
                    <Card className="mb-8 bg-purple-50/50 border-purple-200">
                        <p className="text-purple-900 font-medium leading-relaxed italic">"{DATA.nursing.intro}"</p>
                    </Card>

                    <h3 className="text-xl font-bold text-slate-800 mb-4 border-b pb-2">Specific Nursing Roles by Service Area</h3>
                    <div className="space-y-3 mb-10">
                        {DATA.nursing.roles.map((role, idx) => (
                            <TermItem key={idx} term={role.term} def={role.def} />
                        ))}
                    </div>

                    <Card className="border-t-4 border-t-red-700 bg-white">
                        <div className="flex flex-col md:flex-row gap-6 items-center md:items-start">
                            <div className="flex-1">
                                <h3 className="text-xl font-bold mb-4 flex items-center gap-2 text-red-800">
                                    <Building className="text-red-700" /> Community Mental Health Resources in Egypt
                                </h3>
                                <ul className="space-y-3">
                                    {DATA.nursing.resources.map((res, idx) => (
                                        <li key={idx} className="flex items-center gap-3">
                                            <div className="w-2 h-2 rounded-full bg-red-500"></div>
                                            <span className="text-slate-700 font-medium">{res}</span>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                            <div className="bg-red-50 p-4 rounded-lg border border-red-100 text-sm max-w-sm">
                                <h4 className="font-bold text-red-800 mb-2 flex items-center gap-2"><AlertCircle size={16}/> Legal Note</h4>
                                <p className="text-red-900 leading-relaxed">
                                    The Egyptian law for Mental Health was updated in <strong>2009</strong> to consider concepts of patient admission and hospital stay to fit with C.M.H concepts. However, many C.M.H. services are not yet fully available or established.
                                </p>
                            </div>
                        </div>
                    </Card>
                </div>
            );

            const QuizView = () => (
                <div className="animate-in slide-in-from-right-4 duration-500 max-w-2xl mx-auto">
                    <SectionHeader title="Knowledge Check" icon={<Lightbulb size={32} />} color="bg-yellow-100 text-yellow-600" />
                    
                    {!quizSubmitted ? (
                        <div className="space-y-6">
                            {QUIZ_QUESTIONS.map((q, qIndex) => (
                                <Card key={qIndex} className="p-6">
                                    <h4 className="font-bold text-lg mb-4 text-slate-800">{qIndex + 1}. {q.q}</h4>
                                    <div className="space-y-2">
                                        {q.options.map((opt, optIndex) => (
                                            <button
                                                key={optIndex}
                                                onClick={() => handleQuizOption(qIndex, optIndex)}
                                                className={`w-full text-left p-3 rounded border transition-colors ${
                                                    quizAnswers[qIndex] === optIndex 
                                                        ? 'bg-blue-100 border-blue-500 text-blue-800 font-medium' 
                                                        : 'bg-slate-50 border-slate-200 hover:bg-slate-100 text-slate-700'
                                                }`}
                                            >
                                                {opt}
                                            </button>
                                        ))}
                                    </div>
                                </Card>
                            ))}
                            <button 
                                onClick={submitQuiz}
                                disabled={Object.keys(quizAnswers).length < QUIZ_QUESTIONS.length}
                                className="w-full py-4 bg-blue-600 text-white rounded-lg font-bold text-lg disabled:opacity-50 hover:bg-blue-700 transition shadow-lg"
                            >
                                Submit Answers
                            </button>
                        </div>
                    ) : (
                        <Card className="text-center p-8 md:p-12 border-t-8 border-t-emerald-500">
                            <div className="text-6xl mb-6">{quizScore >= 4 ? '' : ''}</div>
                            <h2 className="text-3xl font-bold mb-3 text-slate-800">You scored {quizScore} / {QUIZ_QUESTIONS.length}</h2>
                            <p className="text-slate-600 mb-8 text-lg">
                                {quizScore === 5 ? "Perfect! You've mastered the concepts of Community Mental Health Services." : "Good effort! Review the sections to strengthen your knowledge."}
                            </p>
                            <button onClick={resetQuiz} className="bg-slate-800 text-white px-8 py-3 rounded-full hover:bg-slate-700 font-bold transition shadow">Take Quiz Again</button>
                        </Card>
                    )}
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 flex flex-col">
                    {/* Top Navigation */}
                    <nav className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between overflow-x-auto hide-scrollbar">
                            <div className="flex items-center gap-2 font-bold text-sm md:text-lg text-blue-800 cursor-pointer shrink-0" onClick={() => handleNavClick(SECTIONS.INTRO)}>
                                <DepartmentLogo className="w-10 h-10 md:w-12 md:h-12 flex-shrink-0 drop-shadow-sm" />
                                <span className="hidden sm:inline">Psychiatric and Mental Health Nursing</span>
                                <span className="sm:hidden">Psych Nursing</span>
                            </div>
                            
                            <div className="flex gap-1 shrink-0 ml-4">
                                {[
                                    { id: SECTIONS.INTRO, label: 'Intro', icon: <Compass size={16}/> },
                                    { id: SECTIONS.THEORY, label: 'Theory', icon: <BookOpen size={16}/> },
                                    { id: SECTIONS.SERVICES, label: 'Services', icon: <Layers size={16}/> },
                                    { id: SECTIONS.NURSING, label: 'Nursing', icon: <Stethoscope size={16}/> },
                                    { id: SECTIONS.QUIZ, label: 'Quiz', icon: <Lightbulb size={16}/> },
                                ].map(nav => (
                                    <button
                                        key={nav.id}
                                        onClick={() => handleNavClick(nav.id)}
                                        className={`flex items-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 rounded-full text-xs md:text-sm font-medium transition-colors ${
                                            activeSection === nav.id 
                                                ? 'bg-blue-100 text-blue-700' 
                                                : 'text-slate-600 hover:bg-slate-100'
                                        }`}
                                    >
                                        {nav.icon} <span className="hidden md:inline">{nav.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    {/* Main Content Area */}
                    <main className="max-w-5xl mx-auto px-4 py-8 flex-grow">
                        {activeSection === SECTIONS.INTRO && <IntroView />}
                        {activeSection === SECTIONS.THEORY && <TheoryView />}
                        {activeSection === SECTIONS.SERVICES && <ServicesView />}
                        {activeSection === SECTIONS.NURSING && <NursingView />}
                        {activeSection === SECTIONS.QUIZ && <QuizView />}
                    </main>

                    {/* Footer */}
                    <footer className="bg-slate-900 text-slate-300 py-10 mt-12 border-t-4 border-indigo-600">
                        <div className="max-w-5xl mx-auto px-6 flex flex-col md:flex-row items-center md:items-start justify-between gap-8">
                            <div className="flex flex-col sm:flex-row items-center sm:items-start gap-5 text-center sm:text-left">
                                <FacultyLogo className="w-24 h-28 flex-shrink-0 drop-shadow-md" />
                                <div className="mt-2">
                                    <p className="mb-1 text-lg font-bold text-white">Psychiatric Nursing & Mental Health</p>
                                    <p className="text-sm text-slate-400 max-w-xs">Introduction to Psychiatric and Mental Health Nursing  Educational Material</p>
                                </div>
                            </div>
                            
                            <div className="text-center md:text-right space-y-2 text-sm border-t md:border-t-0 border-slate-700 pt-6 md:pt-0 w-full md:w-auto">
                                <p className="flex flex-col sm:block"><span className="text-slate-500 text-xs uppercase tracking-wider block sm:inline sm:mr-2">Dean of The Faculty:</span> <span className="text-slate-200">Prof. Dr. Hanan Hosny El-Sherbiny</span></p>
                                <p className="flex flex-col sm:block"><span className="text-slate-500 text-xs uppercase tracking-wider block sm:inline sm:mr-2">Acting Head of Department:</span> <span className="text-slate-200">Asst. Prof. Dr. Mayar Ezz-Eldin El-Naqeeb</span></p>
                                <p className="flex flex-col sm:block"><span className="text-slate-500 text-xs uppercase tracking-wider block sm:inline sm:mr-2">Created by:</span> <span className="font-semibold text-white">M.Abdallah Abozaid</span></p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CMHSApp />);
    </script>
    <style>
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</body>
</html>